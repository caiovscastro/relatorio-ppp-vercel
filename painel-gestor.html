<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Painel Gestor - PPP</title>

  <style>
    body {
      margin: 2;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: Arial, sans-serif;
      background: #f3f3f3;
    }

    .tela-erro {
      background: #fff;
      padding: 24px 26px;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      max-width: 420px;
      text-align: center;
    }

    .tela-erro h1 {
      margin-top: 0;
      color: #c00000;
      font-size: 22px;
    }

    .card {
      width: 95%;
      max-width: 960px;
      background: #fff;
      border-radius: 12px;
      padding: 24px 26px 22px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    }

    .cabecalho {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      border-bottom: 1px solid #e1e1e1;
      padding-bottom: 10px;
      margin-bottom: 14px;
    }

    h1 {
      margin: 0;
      font-size: 22px;
    }

    .subtitulo {
      margin: 2px 0 0;
      font-size: 13px;
      color: #555;
    }

    .info-gestor {
      text-align: right;
      font-size: 13px;
    }

    .info-gestor strong {
      display: block;
    }

    .conteudo {
      font-size: 14px;
    }

    .bloco {
      margin-top: 10px;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #e0e3ff;
      background: #f7f8ff;
    }

    .btn-sair {
      margin-top: 16px;
      display: inline-block;
      padding: 8px 14px;
      background: #0066ff;
      color: #fff;
      border-radius: 6px;
      text-decoration: none;
      font-size: 13px;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <!-- Tela de erro caso não haja sessão de gestor -->
  <div id="telaErro" class="tela-erro" style="display:none;">
    <h1>Acesso inválido</h1>
    <p>Login de gestor não encontrado.</p>
    <p>Faça o login novamente.</p>
    <a href="/login-gestor.html" class="btn-sair">Ir para o login de gestor</a>
  </div>

  <!-- Painel principal do gestor -->
  <div id="painelGestor" class="card" style="display:none;">
    <div class="cabecalho">
      <div>
        <h1>Painel do Gestor</h1>
        <p class="subtitulo">
          Em breve: filtros de RELATORIO (loja, data, documento, usuário, etc.).
        </p>
      </div>
      <div class="info-gestor">
        <strong>Gestor: <span id="nomeGestorSpan"></span></strong>
        <span>Usuário: <span id="usuarioGestorSpan"></span></span>
      </div>
    </div>

    <div class="conteudo">
      <div class="bloco">
        Este painel ainda está em construção.
        Aqui vamos montar:
        <ul>
          <li>Filtro por loja</li>
          <li>Filtro por intervalo de datas</li>
          <li>Filtro por Nº de documento</li>
          <li>Filtro por usuário que registrou o relatório</li>
          <li>Resumo consolidado por loja/período</li>
        </ul>
      </div>

      <a href="/login-gestor.html" class="btn-sair" id="btnSairGestor">
        Sair / Trocar de gestor
      </a>
    </div>
  </div>

  <script>
    const STORAGE_KEY_GESTOR = "PPP_LOGIN_GESTOR";

    function carregarSessaoGestor() {
      try {
        const raw = sessionStorage.getItem(STORAGE_KEY_GESTOR);
        if (!raw) return null;
        return JSON.parse(raw);
      } catch (e) {
        console.error("Erro ao ler sessionStorage do gestor:", e);
        return null;
      }
    }

    function limparSessaoGestor() {
      try {
        sessionStorage.removeItem(STORAGE_KEY_GESTOR);
      } catch (e) {
        console.error("Erro ao limpar sessão do gestor:", e);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const dados = carregarSessaoGestor();

      const telaErro = document.getElementById("telaErro");
      const painel   = document.getElementById("painelGestor");

      if (!dados || !dados.usuario) {
        telaErro.style.display = "block";
        painel.style.display = "none";
        return;
      }

      document.getElementById("nomeGestorSpan").textContent =
        dados.nome || dados.usuario;

      document.getElementById("usuarioGestorSpan").textContent =
        dados.usuario;

      painel.style.display = "block";
      telaErro.style.display = "none";

      // Botão sair limpa a sessão.
      document.getElementById("btnSairGestor").addEventListener("click", () => {
        limparSessaoGestor();
      });
    });
  </script>
</body>
</html>
